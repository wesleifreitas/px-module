angular.module("px-form-item",["ui.mask"]).directive("pxEnter",[function(){return function(e,n,a){n.bind("keydown keypress",function(n){13===n.which&&(e.$apply(function(){e.$eval(a.pxEnter)}),n.preventDefault())})}}]).directive("pxValidNumber",[function(){return{require:"?ngModel",link:function(e,n,a,i){i&&(i.$parsers.push(function(e){var n=e.replace(/[^0-9]+/g,"");return e!==n&&(i.$setViewValue(n),i.$render()),n}),n.bind("keypress",function(e){32===e.keyCode&&e.preventDefault()}))}}}]).directive("pxCnpjMask",["$compile",function(e){return{priority:100,restrict:"A",scope:{cleanValue:"@cleanValue"},require:"?ngModel",link:function(n,a,i,r){r&&(angular.isDefined(i.uiMask)||(i.$set("uiMask","99.999.999/9999-99"),e(a)(n)),r.$parsers.push(function(e){if(angular.isDefined(e)){var n=String(e).replace(/[^0-9]+/g,"");return e!==n&&r.$setViewValue(n),n}}),n.value2mask=function(e){r.$setViewValue(e)})},controller:["$scope",function(e){e.pxForm2mask=function(n){e.value2mask(n)}}]}}]).directive("pxCpfMask",["$compile",function(e){return{priority:100,restrict:"A",scope:{cleanValue:"@cleanValue"},require:"?ngModel",link:function(n,a,i,r){r&&(angular.isDefined(i.uiMask)||(i.$set("uiMask","999.999.999-99"),e(a)(n)),r.$parsers.push(function(e){if(angular.isDefined(e)){var n=String(e).replace(/[^0-9]+/g,"");return e!==n&&r.$setViewValue(n),n}}),n.value2mask=function(e){r.$setViewValue(e)})},controller:["$scope",function(e){e.pxForm2mask=function(n){e.value2mask(n)}}]}}]).directive("pxBrCepMask",["$compile",function(e){return{priority:100,restrict:"A",scope:{cleanValue:"@cleanValue"},require:"?ngModel",link:function(n,a,i,r){r&&(angular.isDefined(i.uiMask)||(i.$set("uiMask","99999-999"),e(a)(n)),r.$parsers.push(function(e){if(angular.isDefined(e)){var n=String(e).replace(/[^0-9]+/g,"");return e!==n&&r.$setViewValue(n),n}}),n.value2mask=function(e){r.$setViewValue(e)})},controller:["$scope",function(e){e.pxForm2mask=function(n){e.value2mask(n)}}]}}]).directive("pxBrPhoneMask",["$compile",function(e){return{priority:100,restrict:"A",scope:{cleanValue:"@cleanValue",validPhone8:"@validPhone8",validPhone9:"@validPhone9",ddd:"=pxDdd"},bindToController:!1,require:"?ngModel",link:function(n,a,i,r){if(r){var u=11;n.ddd===!1&&(u=9),angular.isDefined(i.uiMask)||(n.ddd!==!1?(i.$set("uiMask","(99) 9999-9999?9"),e(a)(n)):(i.$set("uiMask","9999-9999?9"),e(a)(n))),n.tempValue=n.tempValue||"",a.bind("focusout",function(e){angular.isDefined(n.cleanValue)&&(n.cleanValue.length<u||!angular.isDefined(n.validPhone8))&&(n.ddd!==!1?i.$set("uiMask","(99) 9999-9999"):i.$set("uiMask","9999-9999"),r.$setViewValue(n.cleanValue),n.validPhone9=!1,n.validPhone8=!0)}),a.bind("focusin",function(e){angular.isDefined(n.cleanValue)&&n.cleanValue.length<u&&(n.ddd!==!1?i.$set("uiMask","(99) 9999-9999?9"):i.$set("uiMask","9999-9999?9"),r.$setViewValue(n.cleanValue),n.validPhone9=!1,n.validPhone8=!1)}),a.bind("keyup",function(e){"undefined"!=typeof n.cleanValue&&(angular.isDefined(n.cleanValue)?n.cleanValue.length===u&&n.validPhone9===!1||!angular.isDefined(n.validPhone9)?(n.ddd!==!1?i.$set("uiMask","(99) ?99999-9999"):i.$set("uiMask","?99999-9999"),r.$setViewValue(n.cleanValue),n.validPhone9=!0,n.validPhone8=!1):(n.cleanValue.length===u-1&&n.validPhone8===!1||!angular.isDefined(n.validPhone8))&&(n.ddd!==!1?i.$set("uiMask","(99) 9999-9999?9"):i.$set("uiMask","9999-9999?9"),r.$setViewValue(n.cleanValue),n.validPhone9=!1,n.validPhone8=!0):(n.cleanValue=n.tempValue,n.cleanValue.length===u&&n.validPhone9===!1||!angular.isDefined(n.validPhone9)?(n.ddd!==!1?i.$set("uiMask","(99) ?99999-9999"):i.$set("uiMask","?99999-9999"),n.validPhone9=!0,n.validPhone8=!1):(n.cleanValue.length===u-1&&n.validPhone8===!1||!angular.isDefined(n.validPhone8))&&(n.ddd!==!1?i.$set("uiMask","(99) 9999-9999?9"):i.$set("uiMask","9999-9999?9"),n.validPhone9=!1,n.validPhone8=!0)))}),r.$parsers.push(function(e){if(angular.isDefined(e)){var a=String(e).replace(/[^0-9]+/g,"");return n.cleanValue=a,e!==a&&r.$setViewValue(a),a}}),n.value2mask=function(e){r.$setViewValue(n.cleanValue)}}},controller:["$scope",function(e){e.pxForm2mask=function(n){e.value2mask(n)}}]}}]).directive("pxNumberMask",["$filter","$locale",function(e,n){return{restrict:"A",scope:{cleanValue:"@cleanValue",currency:"=pxCurrency",currencySymbol:"@pxCurrencySymbol",numberSuffix:"@pxNumberSuffix",decimalSeparator:"@pxDecimalSeparator",thousandsSeparator:"@pxThousandsSeparator",numberPrecision:"@pxNumberPrecision",useNegative:"=pxUseNegative",usePositiveSymbol:"=pxUsePositiveSymbol"},require:"?ngModel",link:function(e,a,i,r){function u(e){for(var n="",a=0;a<e.length;a++){var i=e.charAt(a);0===n.length&&"0"===i&&(i=!1),i&&i.match(s)&&(m?n.length<m&&(n+=i):n+=i)}return n}function l(e){if(""===e)return e;for(;e.length<v+1;)e="0"+e;return e}function t(e){if(""===e)return g=!0,e;if(e===c+n.NUMBER_FORMATS.DECIMAL_SEP)return"0";var a=l(u(e)),i="",r=0;0===v&&(f="",t="");var t=a.substr(a.length-v,v),s=a.substr(0,a.length-v);if(a=0===v?s:s+f+t,p||""!==$.trim(p)){for(var o=s.length;o>0;o--){var m=s.substr(o-1,1);r++,r%3===0&&(m=p+m),i=m+i}i.substr(0,1)===p&&(i=i.substring(1,i.length)),a=0===v?i:i+f+t}return!V||0===s&&0===t||(a=-1!==e.indexOf("-")&&e.indexOf("+")<e.indexOf("-")?"-"+a:h?"+"+a:""+a),c&&(a=c+a),d&&(a+=d),a}if(a.css({zIndex:0}),r){var s=/[0-9]/,o=e.pxCurrency||!1,c=e.currencySymbol||"",d=e.numberSuffix||"",f=e.decimalSeparator||n.NUMBER_FORMATS.DECIMAL_SEP,p=e.thousandsSeparator||n.NUMBER_FORMATS.GROUP_SEP,v=Number(e.numberPrecision)||2,V=e.useNegative||!1,h=e.usePositiveSymbol||!1;o&&""===c&&(c=n.NUMBER_FORMATS.CURRENCY_SYM);var m=!1,g=!0;r.$parsers.push(function(e){var n="";return"0"===e||""===e&&g!==!1?"0"===e.trim()&&g===!0?0:(g=!0,""):(n=t(e),e!==n&&(r.$setViewValue(n),r.$render()),isNaN(numeral().unformat(n))?0:numeral().unformat(n))})}}}}]);