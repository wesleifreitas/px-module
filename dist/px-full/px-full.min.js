function pxArrayUtil(){function e(e,t,r){var a=r?function(t){return r(t[e])}:function(t){return t[e]};return t=t?-1:1,function(e,r){return e=a(e),r=a(r),t*((e>r)-(r>e))}}function t(e,t,r){for(var a=e.length-1;a>=0;a--)if(e[a][t]==r)return a;return-1}var r={};return r.sortOn=e,r.getIndexByProperty=t,r}function pxDateUtil(){function e(e,t,r){switch(e){case"yyyy":console.warn("pxDateUtil:","datepart não desenvolvido no dateAdd"),alert("pxDateUtil: datepart não desenvolvido no dateAdd");break;case"q":console.warn("pxDateUtil:","datepart não desenvolvido no dateAdd"),alert("pxDateUtil: datepart não desenvolvido no dateAdd");break;case"m":console.warn("pxDateUtil:","datepart não desenvolvido no dateAdd"),alert("pxDateUtil: datepart não desenvolvido no dateAdd");break;case"y":console.warn("pxDateUtil:","datepart não desenvolvido no dateAdd"),alert("pxDateUtil: datepart não desenvolvido no dateAdd");break;case"d":r.setDate(r.getDate()+t);break;case"w":console.warn("pxDateUtil:","datepart não desenvolvido no dateAdd"),alert("pxDateUtil: datepart não desenvolvido no dateAdd");break;case"ww":console.warn("pxDateUtil:","datepart não desenvolvido no dateAdd"),alert("pxDateUtil: datepart não desenvolvido no dateAdd");break;case"h":console.warn("pxDateUtil:","datepart não desenvolvido no dateAdd"),alert("pxDateUtil: datepart não desenvolvido no dateAdd");break;case"n":console.warn("pxDateUtil:","datepart não desenvolvido no dateAdd"),alert("pxDateUtil: datepart não desenvolvido no dateAdd");break;case"s":console.warn("pxDateUtil:","datepart não desenvolvido no dateAdd"),alert("pxDateUtil: datepart não desenvolvido no dateAdd");break;case"l":console.warn("pxDateUtil:","datepart não desenvolvido no dateAdd"),alert("pxDateUtil: datepart não desenvolvido no dateAdd")}return r}function t(e){var t=[];e&&t.push({name:"Todos",id:"%"});for(var r=0;r<moment.months().length;r++)t.push({name:moment.months()[r],id:r});return t}var r={};return"undefined"==typeof moment&&"undefined"!=typeof require?r.moment=require("moment"):"function"==typeof moment?r.moment=moment:r.moment=function(){console.error("pxDateUtil:","moment.js não importada")},r.dateAdd=e,r.months=t,r}function pxMaskUtil(){function e(e,t,r){return t=t||"",r=r||{},r={reverse:r.reverse||!1,usedefaults:r.usedefaults||r.reverse},i(e,t,r)}function t(e,t){for(var r=0,a=t-1,n={escape:!0};a>=0&&n&&n.escape;)n=s[e.charAt(a)],r+=n&&n.escape?1:0,a--;return r>0&&r%2===1}function r(e,t){var r=e.replace(/[^0]/g,"").length,a=t.replace(/[^\d]/g,"").length;return a-r}function a(e,t,r,a){return a&&"function"==typeof a.transform&&(t=a.transform(t)),r.reverse?t+e:e+t}function n(e,t,r){var a=e.charAt(t),l=s[a];return""===a?!1:l&&!l.escape?!0:n(e,t+r,r)}function l(e,t,r){var a=e.split("");return a.splice(r>=0?r:0,0,t),a.join("")}function i(e,i,o){function u(t){if(!v&&n(d,x,b.inc))return!0;if(v||(v=h.length>0),v){var r=h.shift();if(h.push(r),t.reverse&&f>=0)return x++,d=l(d,r,x),!0;if(!t.reverse&&f<e.length)return d=l(d,r,x),!0}return x<d.length&&x>=0}if(!e)return{result:"",valid:!1};e+="";for(var d=i,c=!0,p="",f=o.reverse?e.length-1:0,g=r(d,e),m=!1,h=[],v=!1,b={start:o.reverse?d.length-1:0,end:o.reverse?-1:d.length,inc:o.reverse?-1:1},x=b.start;u(o);x+=b.inc){var C=d.charAt(x),D=e.charAt(f),w=s[C];if(!v||D){if(o.reverse&&t(d,x)){p=a(p,C,o,w),x+=b.inc;continue}if(!o.reverse&&m){p=a(p,C,o,w),m=!1;continue}if(!o.reverse&&w&&w.escape){m=!0;continue}}if(!v&&w&&w.recursive)h.push(C);else{if(v&&!D){w&&w.recursive||(p=a(p,C,o,w));continue}if(h.length>0&&w&&!w.recursive){c=!1;continue}if(!v&&h.length>0&&!D)continue}if(w)if(w.optional){if(w.pattern.test(D)&&g)p=a(p,D,o,w),f+=b.inc,g--;else if(h.length>0&&D){c=!1;break}}else if(w.pattern.test(D))p=a(p,D,o,w),f+=b.inc;else{if(D||!w._default||!o.usedefaults){c=!1;break}p=a(p,w._default,o,w)}else p=a(p,C,o,w),!v&&h.length&&h.push(C)}return{result:p,valid:c}}var o={},s={0:{pattern:/\d/,_default:"0"},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,optional:!0,recursive:!0},S:{pattern:/[a-zA-Z]/},U:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleUpperCase()}},L:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleLowerCase()}},$:{escape:!0}};return o.maskFormat=e,o}function pxStringUtil(){function e(e,t,r){return"undefined"==typeof t?e:r?(e+t).slice(-e.length):(t+e).substring(0,e.length)}var t={};return t.pad=e,t}function pxUtil(e){function t(e,t){switch(t){case"%LIKE%":case"%LIKE":case"LIKE%":return t.toUpperCase().replace("LIKE",e);default:return e}}function r(e,r,a){return"string"==typeof e&&(e=JSON.parse(e)),angular.forEach(e,function(e){if(e.filterGroup&&(e.field=e.field||n(a).item,e.type="int",e.filterOperator="=",e.filterOptions=e.filterOptions||{field:n(a).item,selectedItem:n().item}),e.filterObject={},"IN"===e.filterOperator?e.filterList=!0:e.filterList=!1,angular.isDefined(e.filter)){var r="#"+e.filter,l=e.filter;if(e.filterGroup?(r+="_groupSearch_inputSearch",l="selectedItem"):angular.isDefined(angular.element($(r+"_inputSearch").get(0)).scope())&&(r+="_inputSearch",l="selectedItem"),angular.isDefined(angular.element($(r).get(0)).scope())&&angular.element($(r).get(0)).scope().hasOwnProperty(l)){var i=angular.element($(r).get(0)).scope()[l];if(!angular.isDefined(i))return;var o=e.field,s=i;angular.isDefined(e.filterOptions)&&(o=e.filterOptions.field,i?(s=i[e.filterOptions.selectedItem],angular.isDefined(s)||(s=i[e.filterOptions.selectedItem.toUpperCase()]),"%"===s&&(s=null)):s=null),null!==s&&""!==s?e.filterObject={field:o,value:s}:e.filterObject={}}else e.filterObject={};e.filterObject.value=t(e.filterObject.value,e.filterOperator)}else angular.isDefined(e.filterValue)&&(e.filterObject={field:e.field,value:t(e.filterValue,e.filterOperator)})}),e}function a(e){var t="#"+e.filter,r=document.getElementById(e.filter).getAttribute("ng-model");angular.isDefined(angular.element($(t+"_inputSearch").get(0)).scope())&&(t+="_inputSearch",r="selectedItem");var a=angular.element($(t).get(0));if(angular.isDefined(a.scope())&&a.scope().hasOwnProperty(r)){var n=angular.element($(t).get(0)).scope()[r];if(!angular.isDefined(n))return{value:null,element:a};if(angular.isDefined(e.fieldValueOptions)){if(!n)return{value:null,element:a};if(n=n[e.fieldValueOptions.selectedItem],angular.isDefined(n)||(n=n[e.fieldValueOptions.selectedItem.toUpperCase()]),"%"===n)return{value:null,element:a}}return{value:n,element:a}}return{value:null,element:a}}function n(t){var r={},t=t||e.GROUP_TABLE;if(""===e.GROUP_SUFFIX)r.item=e.GROUP_ITEM,r.label=e.GROUP_LABEL;else{r.item=t+"_"+e.GROUP_ITEM_SUFFIX,r.label=t+"_"+e.GROUP_LABEL_SUFFIX;for(var a=0;a<e.GROUP_REPLACE.length;a++)r.item=r.item.replace(e.GROUP_REPLACE[a],""),r.label=r.label.replace(e.GROUP_REPLACE[a],"")}return r}function l(){var e=navigator.userAgent.toLowerCase();return-1!=e.search(/(android|avantgo|blackberry|bolt|boost|cricket|docomo|fone|hiptop|mini|mobi|palm|phone|pie|tablet|up\.browser|up\.link|webos|wos)/i)?!0:!1}var i={};return i.filterOperator=t,i.setFilterObject=r,i.getFieldValueObject=a,i.isMobile=l,i}function pxDataGridCtrl(e,t,r,a,n,l,i,o,s,u){var d=a.moment;o.currentPage=0,o.reset=function(){o.currentPage=0,o.currentRecordCount=0,o.internalControl.selectedItems=[],o.internalControl.rowsSelected=[],o.rowsSelected=[],angular.isDefined(o.internalControl.checkAll)&&(o.internalControl.checkAll.checked=!1,o.internalControl.checkAll.indeterminate=!1)},o.eventInit=function(){$("#"+o.id+"_pxDataTable").on("page.dt",function(){var e=o.internalControl.table.page.info();if(o.ajaxUrl||""===o.url)o.internalControl.table.context[0].oLanguage.sInfo=e.recordsTotal+" registros carregados.";else{if(angular.isNumber(o.nextRowFrom))return;e.page===e.pages-1&&(o.currentPage=e.page,o.demand&&o.getData(o.nextRowFrom,o.nextRowTo)),0===e.start&&(e.start=1),o.internalControl.table.context[0].oLanguage.sInfo=e.recordsTotal+" registros carregados. Total de registros na base de dados: "+o.recordCount}}),o.updateDataTableSelectAllCtrl=function(e){if(1!=!o.check){var t=e.table().node(),r=$('tbody input[type="checkbox"]',t),a=$('tbody input[type="checkbox"]:checked',t),n=$('thead input[name="select_all"]',t).get(0);o.internalControl.checkAll=n,0===a.length?(n.checked=!1,"indeterminate"in n&&(n.indeterminate=!1)):a.length===r.length?(n.checked=!0,"indeterminate"in n&&(n.indeterminate=!1)):(n.checked=!0,"indeterminate"in n&&(n.indeterminate=!0))}},$("#"+o.id+"_pxDataTable tbody").on("click",'i[class="fa fa-pencil"]',function(e){var t=$(this).closest("tr");o.internalControl.updatedRow=t;var r=o.internalControl.table.row(t).data(),a={};angular.forEach(o.fields,function(e){a[e.field]=r.edit[e.field]});var n={itemClick:r,itemEdit:a};o.itemEdit({event:n}),e.stopPropagation()}),$("#"+o.id+"_pxDataTable tbody").on("click",'input[type="checkbox"]',function(e){var t=$(this).closest("tr"),r=o.internalControl.table.row(t).data(),a=r.pxDataGridRowNumber,n=$.inArray(a,o.rowsSelected);this.checked&&-1===n?(o.rowsSelected.push(a),o.internalControl.selectedItems.push(r)):this.checked||-1===n||(o.rowsSelected.splice(n,1),o.internalControl.selectedItems.splice(n,1)),this.checked?t.addClass("selected"):t.removeClass("selected"),o.updateDataTableSelectAllCtrl(o.internalControl.table),e.stopPropagation()}),$("#"+o.id+"_pxDataTable tbody").on("click","td div i",function(e){var t=$(this).closest("td"),r=t.index(),a=o.internalControl.table.column.index("fromData",r);o.edit===!0&&a--,o.check===!0&&a--;var n=angular.copy(o.internalControl.table.row(t).data());if(a<=o.links.length){n.link=o.links[a],n.linkId=o.links[a].linkId;var l={itemClick:n};o.itemClick({event:l}),e.stopPropagation()}}),$("#"+o.id+"_pxDataTable").on("click","tbody td, thead th:first-child",function(e){var t=$(this).closest("tr"),r=angular.copy(o.internalControl.table.row(t).data());r.pxLink={link:!1};var a={itemClick:r};o.itemClick({event:a}),"I"!==e.target.tagName&&$(this).parent().find('input[type="checkbox"]').trigger("click")}),$("#"+o.id+'_pxDataTable thead input[name="select_all"]').on("click",function(e){this.checked?$("#"+o.id+'_pxDataTable tbody input[type="checkbox"]:not(:checked)').trigger("click"):$("#"+o.id+'_pxDataTable tbody input[type="checkbox"]:checked').trigger("click"),e.stopPropagation()}),$("#"+o.id+"_pxDataTable").on("draw",function(){o.updateDataTableSelectAllCtrl(table)})},o.getData=function(r,a){if(!o.internalControl.working){o.internalControl.working=!0;var n=o.fields,l=!0;if(angular.forEach(n,function(e){if(e.filterObject={},angular.isDefined(e.filter)){var r="#"+e.filter,a=e.filter;e.filterGroup?(r+="_groupSearch_inputSearch",a="selectedItem"):angular.isDefined(angular.element($(r+"_inputSearch").get(0)).scope())&&(r+="_inputSearch",a="selectedItem");var n=angular.element($(r).get(0)),i=n.data("$ngModelController");if(angular.isDefined(i)&&(i.$validate(),i.$valid?n.trigger("keyup"):(n.trigger("keyup"),l=!1)),angular.isDefined(angular.element($(r).get(0)).scope())&&angular.element($(r).get(0)).scope().hasOwnProperty(a)){var o=angular.element($(r).get(0)).scope()[a],s=e.field,u=o;angular.isDefined(e.filterOptions)&&e.filterOptions.hasOwnProperty("selectedItem")&&(s=e.filterOptions.field,o?(u=o[e.filterOptions.selectedItem],angular.isDefined(u)||(u=o[e.filterOptions.selectedItem.toUpperCase()]),"%"===u&&(u=null)):u=null),null!==u&&""!==u?e.filterObject={field:s,value:u}:e.filterObject={}}else e.filterObject={};if(e.filterObject.value=t.filterOperator(e.filterObject.value,e.filterOperator),"BETWEEN"===String(e.filterOperator).toUpperCase()){var c="#"+e.filterOptions.endField,p=e.filterOptions.endField;angular.isDefined(angular.element($(c+"_inputSearch").get(0)).scope())&&(c+="_inputSearch",p="selectedItem");var n=angular.element($(c).get(0)),i=n.data("$ngModelController");angular.isDefined(i)&&(i.$validate(),i.$valid?n.trigger("keyup"):(n.trigger("keyup"),l=!1));var f=angular.element($(c).get(0)).scope()[p],g=e.filterOptions.endField,m=f;if(angular.isDefined(angular.element($(c).get(0)).scope())&&angular.element($(c).get(0)).scope().hasOwnProperty(p)){if(angular.isDefined(e.filterOptions)&&e.filterOptions.hasOwnProperty("selectedItem")&&(g=e.filterOptions.field,f?(m=f[e.filterOptions.selectedItem],angular.isDefined(m)||(m=f[e.filterOptions.selectedItem.toUpperCase()]),"%"===m&&(m=null)):m=null),e.filterObject.endField=g,angular.isDefined(m)&&null!==m&&""!==m?e.filterObject.endValue=m:(e.filterObject.endValue=e.filterObject.value,angular.element($(c).get(0)).scope()[g]=e.filterObject.value),e.filterObject.value>e.filterObject.endValue){var h=angular.copy(e.filterObject.endValue);e.filterObject.endValue=e.filterObject.value,angular.element($(c).get(0)).scope()[g]=e.filterObject.value,e.filterObject.value=h,angular.element($(r).get(0)).scope()[e.filter]=h}}else e.filterObject.endValue=e.filterObject.value,angular.element($(c).get(0)).scope()[g]=e.filterObject.value;("NUMERIC"===e.type.toUpperCase()||"INT"===e.type.toUpperCase())&&(e.filterObject.value=d(e.filterObject.value).format("YYYYMMDD"),e.filterObject.endValue=d(e.filterObject.endValue).format("YYYYMMDD"))}}}),!l)return o.reset(),$("#"+o.id+"_pxDataTable").DataTable().clear().draw(),void(o.internalControl.working=!1);var s={};s.url=o.url,s.schema=o.schema,angular.isDefined(o.view)&&""!==o.view?s.table=o.view:s.table=o.table,s.fields=angular.toJson(n),s.orderBy=angular.toJson(o.orderBy),s.rows=o.rowsProcess,angular.isDefined(r)&&(s.rowFrom=r),angular.isDefined(a)&&(s.rowTo=a),s.group=o.group,s.groupItem=o.groupItem,s.groupLabel=o.groupLabel,o.where&&(o.where=t.setFilterObject(o.where,!1,e.GROUP_TABLE),s.where=angular.toJson(o.where)),0===r&&(o.reset(),$("#"+o.id+"_pxDataTable").DataTable().clear().draw()),i.select(s,function(e){if(o.debug&&console.info("px-data-grid "+o.id+" getData",e),angular.isDefined(e.data.fault))o.internalControl.working=!1,alert("Ops! Ocorreu um erro inesperado.\nPor favor contate o administrador do sistema!");else if(e.data.qQuery.length>0){angular.forEach(e.data.qQuery,function(e){o.addDataRow(e)}),o.recordCount=e.data.recordCount,o.nextRowFrom=e.data.rowFrom+o.rowsProcess,o.nextRowTo=e.data.rowTo+o.rowsProcess;o.internalControl.table;$("#"+o.id+"_pxDataTable").DataTable().page(o.currentPage).draw(!1);var t=$("#"+o.id+"_pxDataTable").DataTable().page.info();0===t.start&&(t.start=1);var r=t.recordsTotal+" registros carregados.";angular.isNumber(o.recordCount)&&(r+=" Total de registros na base de dados: "+o.recordCount),$("#"+o.id+"_pxDataTable_info").html(r),o.demand?o.internalControl.working=!1:o.getData(o.nextRowFrom,o.nextRowTo)}else o.internalControl.working=!1})}},o.updateDataRow=function(e){var t=o.internalControl.table.row(o.internalControl.updatedRow).data();angular.forEach(o.fields,function(r){angular.isDefined(t[r.field])&&angular.isDefined(e[r.field])&&(t.edit[r.field]=e[r.field],angular.isDefined(r.stringMask)?angular.isDefined(r.pad)?t[r.field]=n.maskFormat(l.pad(r.pad,e[r.field],!0),r.stringMask).result:t[r.field]=n.maskFormat(e[r.field],r.stringMask).result:t[r.field]=e[r.field])}),o.internalControl.table.row(o.internalControl.updatedRow).data(t).draw()},o.sortDataBy=function(e){$("#"+o.id+"_pxDataTable").DataTable().order(e).draw()},o.addDataRow=function(e){o.currentRecordCount++;var t={};t.value={},t.pxDataGridRowNumber=o.currentRecordCount,t.edit={},angular.forEach(o.fields,function(r){if(r.link&&(t[r.linkId]=r),"undefined"!=typeof r.field){if(t.value[r.field]=angular.copy(e[r.field]),angular.isDefined(e[r.field])?t[r.field]=e[r.field]:t[r.field]=e[r.field.toUpperCase()],angular.isDefined(t[r.field])||(t[r.field]=""),t.edit[r.field]=angular.copy(t[r.field]),r.stringMask){var a="";switch(r.stringMask){case"cpf":a="###.###.###-##";break;case"cnpj":a="##.###.###/####-##";break;case"cep":a="#####-###";break;case"brPhone":a=(11===t[r.field].length,"(##) #####-####");break;case"cpfCnpj":"varchar"===r.type||"char"===r.type||"string"===r.type?a=11===String(t[r.field]).length?"###.###.###-##":"##.###.###/####-##":(t[r.field]=String(Number(t[r.field])),a=t[r.field].length>11?"##.###.###/####-##":"###.###.###-##");break;default:a=angular.copy(r.stringMask)}angular.isDefined(r.pad)?t[r.field]=n.maskFormat(l.pad(r.pad,t[r.field],!0),a).result:t[r.field]=n.maskFormat(String(t[r.field]),a).result}if(r.moment){var i=d(Date.parse(t[r.field])).format(r.moment);angular.isDate(t[r.field])||"Invalid date"!==i&&"date"===r.type?t[r.field]=i:parseInt(t[r.field])>0&&parseInt(t[r.field])<=12?t[r.field]=d.months()[parseInt(t[r.field])-1]:8===String(t[r.field]).length?t[r.field]=d(new Date(String(t[r.field]).substr(0,4),String(t[r.field]).substr(4,2)-1,String(t[r.field]).substr(6,2))).format(r.moment):t[r.field]=""}if(r.numeral)switch(r.numeral){case"currency":t[r.field]=numeral(t[r.field]).format("0,0.00");break;default:t[r.field]=numeral(t[r.field]).format(r.numeral)}}if(o.labelFunction&&r.label){o.labelFunction({event:{item:r,data:t}})}}),$("#"+o.id+"_pxDataTable").DataTable().row.add(t).draw()},o.removeRow=function(e,t){".selected"===e?o.internalControl.table.rows(".selected").remove().draw(!1):o.internalControl.table.rows(e).remove().draw()},o.clearData=function(){o.currentRecordCount>0&&$("#"+o.id+"_pxDataTable").DataTable().clear().draw()},o.remove=function(){var e=o.fields,t=JSON.parse(o.config),r=t.table;angular.isDefined(r)||(r=o.table);var a={};a.schema=o.schema,a.table=r,a.fields=angular.toJson(e),a.selectedItems=angular.toJson(o.internalControl.selectedItems),i.remove(a,function(e){if(o.debug&&console.info("pxDataGrid remove: ",e),e.data.success){o.internalControl.table.rows(".selected").remove().draw(!1);var t=o.internalControl.table.page.info();0===t.start&&(t.start=1),o.recordCount-=o.rowsSelected.length,$("#"+o.id+"_pxDataTable_info").html(t.recordsTotal+" registros carregados. Total de registros na base de dados: "+o.recordCount),o.internalControl.selectedItems=[],o.rowsSelected=[]}else alert("Ops! Ocorreu um erro inesperado.\nPor favor contate o administrador do sistema!")})}}function pxDataGridService(e,t,r){function a(a,n){a.dsn=e.PROJECT_DSN,a.cfcPath=e.PX_CFC_PATH,""===a.url&&(a.url="../../../rest/px-project/system/px-data-grid/getData");try{a.user=r.globals.currentUser.usu_id}catch(l){a.user=-1}angular.isDefined(a.orderBy)||(a.orderBy=""),angular.isDefined(a.groupItem)||(a.groupItem=""),angular.isDefined(a.groupLabel)||(a.groupLabel=""),angular.isDefined(a.where)||(a.where=""),t({method:"POST",url:a.url,data:a}).then(function(e){n(e)},function(e){alert("Ops! Ocorreu um erro inesperado.\nPor favor contate o administrador do sistema!")})}function n(a,n){a.dsn=e.PROJECT_DSN,a.cfcPath=e.PX_CFC_PATH,a.user=r.globals.currentUser.usu_id,t({method:"POST",url:"../../../rest/px-project/system/px-data-grid/removeData",data:a}).then(function(e){n(e)},function(e){alert("Ops! Ocorreu um erro inesperado.\nPor favor contate o administrador do sistema!")})}var l={};return l.select=a,l.remove=n,l}!function(){"use strict";var e="",t="px-project.src"+e.replace(/\/|\\/g,".");angular.module("pxConfig",[]).constant("pxConfig",{PX_PACKAGE:e,PX_CFC_PATH:t,LIB:"lib/",PROJECT_ID:0,PROJECT_NAME:"Phoenix Project",PROJECT_SRC:"px-project/src/",PROJECT_CSS:[e+"system/login/login.css","styles.css"],PROJECT_DSN:"px_project_sql",LOCALE:"pt-BR",LOGIN_REQUIRED:!0,GROUP:!1,GROUP_TABLE:"grupo",GROUP_ITEM_SUFFIX:"",GROUP_LABEL_SUFFIX:"",GROUP_REPLACE:[],GROUP_ITEM:"grupo_id",GROUP_LABEL:"grupo_nome"})}(),angular.module("px-array-util",[]).factory("pxArrayUtil",pxArrayUtil),pxArrayUtil.$inject=[],angular.module("px-date-util",[]).factory("pxDateUtil",pxDateUtil),pxDateUtil.$inject=[],angular.module("px-mask-util",[]).factory("pxMaskUtil",pxMaskUtil),pxMaskUtil.$inject=[],angular.module("px-string-util",[]).factory("pxStringUtil",pxStringUtil),pxStringUtil.$inject=[],angular.module("px-util",[]).factory("pxUtil",pxUtil),pxUtil.$inject=[],angular.module("px-form-item",["ngMessages","ui.mask"]).directive("pxEnter",[function(){return function(e,t,r){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(r.pxEnter)}),t.preventDefault())})}}]).directive("pxMessage",[function(){return{restrict:"E",require:"^form",replace:!0,transclude:!1,template:'<div class="help-block" ng-messages="elementMessage"><p ng-message="required">{{messages.required}}</p><p ng-message="email">{{messages.email}}</p><p ng-message="minlength">{{messages.minlength}}</p><p ng-message="maxlength">{{messages.maxlength}}</p></div>',scope:{elementMessage:"=pxElement",messagesCustom:"=?pxMessages"},link:function(e,t,r,a){e.elementMessage=e.elementMessage.$error,e.messagesCustom=e.messagesCustom||{},e.messages={},e.messages.required=e.messagesCustom.required||"Campo obrigatório.",e.messages.email=e.messagesCustom.email||"E-mail inválido.",e.messages.minlength=e.messagesCustom.minlength||"Muito curto.",e.messages.maxlength=e.messagesCustom.maxlength||"Muito logon."}}}]).directive("pxShowError",["$timeout","$rootScope",function(e,t){return{restrict:"E",require:"^form",replace:!0,transclude:!1,template:'<p class="help-block px-show-error">{{error}}</p>',scope:{element:"@pxElement",confirm:"@pxConfirm",confirmError:"@pxConfirmError",minLengthError:"@pxMinlengthError"},link:function(t,r,a,n){t.elementShowError=angular.element($("#"+t.element).get(0)),t.elementShowError.on("keyup blur",function(e){t.validateElement()}),e(function(){t.validateElement()},0)},controller:["$scope",function(e){e.validateElement=function(){var t="#"+e.element;angular.isDefined(angular.element($(t+"_groupSearch_inputSearch").get(0)).scope())?t+="_groupSearch_inputSearch":angular.isDefined(angular.element($(t+"_inputSearch").get(0)).scope())&&(t+="_inputSearch");var r=e.elementShowError.data("$ngModelController");if(angular.isDefined(r)){var a=angular.element($("#"+e.confirm).get(0)),n=a.data("$ngModelController");e.error="",angular.isDefined(e.confirm)&&(String(n.$modelValue)!==String(r.$modelValue)?r.$setValidity("confirm",!1):r.$setValidity("confirm",!0)),r.$invalid?(e.$apply(function(){r.$error.deps?e.error=e.elementShowError.scope().depsError:r.$error.required||r.$error.requiredsearch?e.error="Campo obrigatório":r.$error.email?e.error="E-mail inválido":r.$error.minlength?e.error=e.minLengthError:r.$error.unique?e.error="Campo já existente":r.$error.confirm?angular.isDefined(e.confirmError)?e.error=e.confirmError:e.error="Campo não confere":console.warn("px-show-error:","$error ausente",r.$error)}),e.elementShowError.css({borderColor:"#A94442"})):(e.$apply(function(){e.error=""}),e.elementShowError.css({borderColor:"#CCCCCC"}))}}}]}}]).directive("pxValidNumber",[function(){return{require:"?ngModel",link:function(e,t,r,a){a&&(a.$parsers.push(function(e){var t=e.replace(/[^0-9]+/g,"");return e!==t&&(a.$setViewValue(t),a.$render()),t}),t.bind("keypress",function(e){32===e.keyCode&&e.preventDefault()}))}}}]).directive("pxCnpjMask",["$compile",function(e){return{priority:100,restrict:"A",scope:{cleanValue:"@cleanValue"},require:"?ngModel",link:function(t,r,a,n){n&&(angular.isDefined(a.uiMask)||(a.$set("uiMask","99.999.999/9999-99"),e(r)(t)),n.$parsers.push(function(e){if(angular.isDefined(e)){var t=String(e).replace(/[^0-9]+/g,"");return e!==t&&n.$setViewValue(t),t}}),t.value2mask=function(e){n.$setViewValue(e)})},controller:["$scope",function(e){e.pxForm2mask=function(t){e.value2mask(t)}}]}}]).directive("pxCpfMask",["$compile",function(e){return{priority:100,restrict:"A",scope:{cleanValue:"@cleanValue"},require:"?ngModel",link:function(t,r,a,n){n&&(angular.isDefined(a.uiMask)||(a.$set("uiMask","999.999.999-99"),e(r)(t)),n.$parsers.push(function(e){if(angular.isDefined(e)){var t=String(e).replace(/[^0-9]+/g,"");return e!==t&&n.$setViewValue(t),t}}),t.value2mask=function(e){n.$setViewValue(e)})},controller:["$scope",function(e){e.pxForm2mask=function(t){e.value2mask(t)}}]}}]).directive("pxBrCepMask",["$compile",function(e){return{priority:100,restrict:"A",scope:{cleanValue:"@cleanValue"},require:"?ngModel",link:function(t,r,a,n){n&&(angular.isDefined(a.uiMask)||(a.$set("uiMask","99999-999"),e(r)(t)),n.$parsers.push(function(e){if(angular.isDefined(e)){var t=String(e).replace(/[^0-9]+/g,"");return e!==t&&n.$setViewValue(t),t}}),t.value2mask=function(e){n.$setViewValue(e)})},controller:["$scope",function(e){e.pxForm2mask=function(t){e.value2mask(t)}}]}}]).directive("pxBrPhoneMask",["$compile","$timeout",function(e,t){return{priority:100,restrict:"A",scope:{cleanValue:"@cleanValue",validPhone8:"@validPhone8",validPhone9:"@validPhone9",ddd:"=pxDdd"},bindToController:!1,require:"?ngModel",link:function(r,a,n,l){if(l){t(function(){console.info("ngModelCtrl",l)},0);var i=11;r.ddd===!1&&(i=9),angular.isDefined(n.uiMask)||(r.ddd!==!1?(n.$set("uiMask","(99) 9999-9999?9"),e(a)(r)):(n.$set("uiMask","9999-9999?9"),e(a)(r))),r.tempValue=r.tempValue||"",a.bind("focusout",function(e){angular.isDefined(r.cleanValue)&&(r.cleanValue.length<i||!angular.isDefined(r.validPhone8))&&(r.ddd!==!1?n.$set("uiMask","(99) 9999-9999"):n.$set("uiMask","9999-9999"),l.$setViewValue(r.cleanValue),r.validPhone9=!1,r.validPhone8=!0)}),a.bind("focusin",function(e){angular.isDefined(r.cleanValue)&&r.cleanValue.length<i&&(r.ddd!==!1?n.$set("uiMask","(99) 9999-9999?9"):n.$set("uiMask","9999-9999?9"),l.$setViewValue(r.cleanValue),r.validPhone9=!1,r.validPhone8=!1)}),a.bind("keyup",function(e){"undefined"!=typeof r.cleanValue&&(angular.isDefined(r.cleanValue)?r.cleanValue.length===i&&r.validPhone9===!1||!angular.isDefined(r.validPhone9)?(r.ddd!==!1?n.$set("uiMask","(99) ?99999-9999"):n.$set("uiMask","?99999-9999"),l.$setViewValue(r.cleanValue),r.validPhone9=!0,r.validPhone8=!1):(r.cleanValue.length===i-1&&r.validPhone8===!1||!angular.isDefined(r.validPhone8))&&(r.ddd!==!1?n.$set("uiMask","(99) 9999-9999?9"):n.$set("uiMask","9999-9999?9"),l.$setViewValue(r.cleanValue),r.validPhone9=!1,r.validPhone8=!0):(r.cleanValue=r.tempValue,r.cleanValue.length===i&&r.validPhone9===!1||!angular.isDefined(r.validPhone9)?(r.ddd!==!1?n.$set("uiMask","(99) ?99999-9999"):n.$set("uiMask","?99999-9999"),r.validPhone9=!0,r.validPhone8=!1):(r.cleanValue.length===i-1&&r.validPhone8===!1||!angular.isDefined(r.validPhone8))&&(r.ddd!==!1?n.$set("uiMask","(99) 9999-9999?9"):n.$set("uiMask","9999-9999?9"),r.validPhone9=!1,r.validPhone8=!0)))}),l.$parsers.push(function(e){if(angular.isDefined(e)){var t=String(e).replace(/[^0-9]+/g,"");return r.cleanValue=t,e!==t&&l.$setViewValue(t),t}}),r.value2mask=function(e){l.$setViewValue(r.cleanValue)}}},controller:["$scope",function(e){e.pxForm2mask=function(t){e.value2mask(t)}}]}}]).directive("pxNumberMask",["$filter","$locale",function(e,t){return{restrict:"A",scope:{cleanValue:"@cleanValue",currency:"=pxCurrency",currencySymbol:"@pxCurrencySymbol",numberSuffix:"@pxNumberSuffix",decimalSeparator:"@pxDecimalSeparator",thousandsSeparator:"@pxThousandsSeparator",numberPrecision:"@pxNumberPrecision",useNegative:"=pxUseNegative",usePositiveSymbol:"=pxUsePositiveSymbol"},require:"?ngModel",link:function(e,r,a,n){function l(e){for(var t="",r=0;r<e.length;r++){var a=e.charAt(r);0===t.length&&"0"===a&&(a=!1),a&&a.match(s)&&(v?t.length<v&&(t+=a):t+=a)}return t}function i(e){if(""===e)return e;for(;e.length<g+1;)e="0"+e;return e}function o(e){if(""===e)return b=!0,e;if(e===d+t.NUMBER_FORMATS.DECIMAL_SEP)return"0";var r=i(l(e)),a="",n=0;0===g&&(p="",o="");var o=r.substr(r.length-g,g),s=r.substr(0,r.length-g);if(r=0===g?s:s+p+o,f||""!==$.trim(f)){for(var u=s.length;u>0;u--){var v=s.substr(u-1,1);n++,n%3===0&&(v=f+v),a=v+a}a.substr(0,1)===f&&(a=a.substring(1,a.length)),r=0===g?a:a+p+o}return!m||0===s&&0===o||(r=-1!==e.indexOf("-")&&e.indexOf("+")<e.indexOf("-")?"-"+r:h?"+"+r:""+r),d&&(r=d+r),c&&(r+=c),r}if(r.css({zIndex:0}),n){var s=/[0-9]/,u=e.pxCurrency||!1,d=e.currencySymbol||"",c=e.numberSuffix||"",p=e.decimalSeparator||t.NUMBER_FORMATS.DECIMAL_SEP,f=e.thousandsSeparator||t.NUMBER_FORMATS.GROUP_SEP,g=Number(e.numberPrecision)||2,m=e.useNegative||!1,h=e.usePositiveSymbol||!1;u&&""===d&&(d=t.NUMBER_FORMATS.CURRENCY_SYM);var v=!1,b=!0;n.$parsers.push(function(e){var t="";return"0"===e||""===e&&b!==!1?"0"===e.trim()&&b===!0?0:(b=!0,""):(t=o(e),e!==t&&(n.$setViewValue(t),n.$render()),isNaN(numeral().unformat(t))?0:numeral().unformat(t))})}}}}]).directive("pxGroupShow",["$rootScope","$timeout",function(e,t){return{restrict:"A",require:"?ngModel",link:function(r,a,n,l){1!==e.globals.currentUser.per_developer&&a.hide(),t(function(){var e=angular.element($("#"+n.pxGroupShow).get(0)),t=e.data("$ngModelController");t&&t.$setValidity("required",!0)},0)}}}]).directive("pxGroup",["pxConfig","$rootScope","$mdDialog",function(e,t,r){return{restrict:"E",scope:{id:"@id",required:"=required",control:"=pxControl",placeholder:"@placeholder",inputClass:"@pxInputClass",selectedItem:"=pxSelectedItem",searchClick:"&pxSearchClick",templateUrl:"@pxTemplateUrl","for":"@for",change:"&pxChange"},templateUrl:e.PX_PACKAGE+"system/components/px-form-item/px-group.html",link:function(a,n,l,i){function o(e,t){e.callback=function(r){e.setValue(r.itemClick),t.hide(),e.searchClick({event:r})},e.setValue=function(t){e.groupSearchControl.setValue(t)},e.setDefault=function(t){e.groupSearchControl.setDefault(t)}}1!==t.globals.currentUser.per_developer&&(n.hide(),1===n.parent().children().length&&n.parent().hide()),""===e.GROUP_ITEM&&""===e.GROUP_LABEL?a.groupSearchConfig={table:e.GROUP_TABLE,fields:[{title:"",labelField:!0,field:e.GROUP_TABLE+"_"+e.GROUP_LABEL_SUFFIX,search:!0,type:"string",filterOperator:"%LIKE%"},{title:"",field:e.GROUP_TABLE+"_"+e.GROUP_ITEM_SUFFIX}]}:a.groupSearchConfig={fields:[{title:"",labelField:!0,field:e.GROUP_LABEL,search:!0,type:"string",filterOperator:"%LIKE%"},{title:"",field:e.GROUP_ITEM}]},a.internalControl=a.control||{},a.internalControl.setValue=function(e){a.groupSearchControl.setValue(e)},a.internalControl.setDefault=function(e){a.groupSearchControl.setDefault(e)},a.groupSearchControl={},a.groupSearchClick=function(){a.templateUrl&&""!==a.templateUrl?r.show({scope:a,preserveScope:!0,controller:o,templateUrl:a.templateUrl,parent:angular.element(document.body),targetEvent:event,clickOutsideToClose:!0}):a.searchClick({event:event})},a.groupSearchChange=function(e){a.internalControl.selectedItem=a.groupSearchControl.selectedItem,a.change({event:e})},o.$inject=["$scope","$mdDialog"]}}}]).directive("pxInputSearch",["pxConfig","pxUtil","pxArrayUtil","$parse","$http","$sce","$timeout","$mdDialog","$compile",function(e,t,r,a,n,l,i,o,s){return{restrict:"E",scope:{debug:"=pxDebug",id:"@id",config:"@pxConfig",required:"=required",control:"=pxControl",placeholder:"@placeholder",inputClass:"@pxInputClass",complete:"=pxComplete",table:"@pxTable",fields:"@pxFields",orderBy:"@pxOrderBy",recordCount:"@pxRecordCount",where:"@pxWhere",selectedItem:"@pxSelectedItem",url:"@pxUrl",responseQuery:"@pxResponseQuery",localQuery:"@pxLocalQuery",searchFields:"@searchfields",dialog:"=pxDialog",searchClick:"&pxSearchClick",change:"&pxChange",dependencies:"@pxDependencies"},require:"?ngModel",templateUrl:e.PX_PACKAGE+"system/components/px-form-item/px-input-search.html",link:function(a,l,o,s){if(s){a.inputClass=a.inputClass||"form-control",a.dialog?a.inputGroup="input-group":a.inputGroup="",a.lastSearchTerm=null,a.currentIndex=null,a.justChanged=!1,a.searchTimer=null,a.hideTimer=null,a.searching=!1,a.pause=400,a.minLength=3,a.searchStr=null,a.internalControl=a.control||{},a.internalControl.working=!1,a.internalControl.selectedItem=null,a.internalControl.setValue=function(e){a.setValue(e)},a.internalControl.setDefault=function(e){a.setDefault(e)},a.internalControl.getValue=function(){return{selectedItem:a.selectedItem}},i(function(){var e=angular.element($("#"+a.id+"_inputSearch").get(0));e.on("blur",function(e){a.setValidity()});try{var r=JSON.parse(a.config);if(a.table=a.table||r.table,a.fields=a.fields||r.fields,a.orderBy=a.orderBy||r.orderBy,a.recordCount=a.recordCount||r.recordCount,a.where=a.where||r.where,a.dependencies=[],Array.isArray(a.where))for(var n=0;n<a.where.length;n++)a.where[n].required===!0&&a.dependencies.push(a.where[n]);
}catch(l){console.error("px-form-item: configuração do campo "+a.id+" inválida")}if(a.dependencies)for(var n=0;n<a.dependencies.length;n++){var i=t.getFieldValueObject(a.dependencies[n]);i.element.on("blur",function(e){var r=t.getFieldValueObject({filter:$(this).attr("id")}),n=angular.element($("#"+$(this).attr("id")).get(0));(null===r.value||""===r.value||r.value!==n.scope().oldValue)&&a.clear(),n.scope().oldValue=angular.copy(r.value)})}},0),a.setValidity=function(){var e=angular.element($("#"+a.id+"_inputSearch").get(0)),t=angular.element($("#"+a.id+"_spanInputSearch").get(0));if(angular.isDefined(a.selectedItem)&&null!==a.selectedItem){var n="";angular.isDefined(a.selectedItem)&&(a.labelField=a.fields[r.getIndexByProperty(a.fields,"labelField",!0)].field,n=a.selectedItem[a.labelField],angular.isDefined(n)||(n=a.selectedItem[a.labelField.toUpperCase()])),a.searchStr!==n?(a.clear(),s.$setValidity("requiredsearch",!1)):(s.$setValidity("requiredsearch",!0),s.$setValidity("required",!0))}else s.$setValidity("requiredsearch",!1),a.clear();i(function(){e.trigger("keyup")},0),o.required===!0&&(s.$invalid?(e.css({borderColor:"#A94442"}),t.css({borderColor:"#A94442"})):(e.css({borderColor:"#CCCCCC"}),t.css({borderColor:"#CCCCCC"})))};var u=function(e,t){return e.length>=a.minLength&&e!==t};if(a.complete===!0){a.processResults=function(e,t,r){if(e&&e.length>0){a.results=[];for(var n=0;n<e.length;n++){for(var l="",i="",o=0;o<r.length;o++){var s="";r[o].labelField&&(s=e[n][r[o].field],angular.isDefined(s)||(s=e[n][r[o].field.toUpperCase()]),l+=r[o].title+s+""),r[o].descriptionField&&(s=e[n][r[o].field],angular.isDefined(s)||(s=e[n][r[o].field.toUpperCase()]),i+=r[o].title+s+" ")}var u={title:l,description:i,item:e[n]};a.results[a.results.length]=u}}else a.results=[]},a.searchTimerComplete=function(r){var l=a.fields;if(r.length>=a.minLength)if(a.localQuery)console.warn("px-complete:","função localQuery não implementada!"),a.searching=!1,a.processResults(JSON.parse(a.localQuery),r);else{angular.forEach(l,function(e){e.search&&(e.filterObject={},e.filterObject={field:e.field,value:t.filterOperator(r,e.filterOperator)})});var i={};i.dsn=e.PROJECT_DSN,i.table=a.table,i.table=a.table,i.fields=angular.toJson(l),i.orderBy=a.orderBy,a.where=t.setFilterObject(a.where,!1,a.table),i.where=angular.toJson(a.where),angular.isDefined(a.recordCount)&&""!==a.recordCount||(a.recordCount=4),i.rows=a.recordCount,angular.isDefined(a.url)&&""!==a.url||(a.url=e.PX_PACKAGE+"system/components/px-form-item/px-form-item.cfc?method=getData"),n({method:"POST",url:a.url,dataType:"json",params:i}).success(function(e,t,n,i){a.debug&&console.info("px-input-search getData success",e),angular.isDefined(a.responseQuery)&&""!==a.responseQuery||(a.responseQuery="qQuery"),a.searching=!1,a.processResults(a.responseQuery?e[a.responseQuery]:e,r,l)}).error(function(e,t,r,a){alert("Ops! Ocorreu um erro inesperado.\nPor favor contate o administrador do sistema!")})}},a.hideResults=function(){a.hideTimer=i(function(){a.showDropdown=!1},a.pause)},a.resetHideResults=function(){a.hideTimer&&i.cancel(a.hideTimer)},a.hoverRow=function(e){a.currentIndex=e},a.keyPressed=function(e){38!==e.which&&40!==e.which&&13!==e.which?a.searchStr&&""!==a.searchStr?u(a.searchStr,a.lastSearchTerm)?(a.lastSearchTerm=a.searchStr,a.showDropdown=!0,a.currentIndex=-1,a.results=[],a.searchTimer&&i.cancel(a.searchTimer),a.searching=!0,a.searchTimer=i(function(){a.searchTimerComplete(a.searchStr)},a.pause)):a.hasDependencies():(a.showDropdown=!1,a.lastSearchTerm=null):e.preventDefault()},a.selectResult=function(e){a.searchStr=a.lastSearchTerm=e.title,a.internalControl.selectedItem=a.selectedItem=e.item,a.showDropdown=!1,a.results=[],a.setValidity(),a.change({event:event})};var d=l.find("input");d.on("keyup",a.keyPressed),l.on("keyup",function(e){40===e.which?(a.results&&a.currentIndex+1<a.results.length&&(a.currentIndex++,a.$apply(),e.preventDefault(),e.stopPropagation()),a.$apply()):38===e.which?a.currentIndex>=1&&(a.currentIndex--,a.$apply(),e.preventDefault(),e.stopPropagation()):13===e.which?a.results&&a.currentIndex>=0&&a.currentIndex<a.results.length?(a.selectResult(a.results[a.currentIndex]),a.$apply(),e.preventDefault(),e.stopPropagation()):(a.results=[],a.$apply(),e.preventDefault(),e.stopPropagation()):27===e.which?(a.results=[],a.showDropdown=!1,a.$apply()):8===e.which&&(a.selectedItem=null,a.$apply())}),a.showDialog=function(e){a.hasDependencies()||(a.clear(),a.searchClick({event:e}))},a.hasDependencies=function(){if(a.dependencies)for(var e=0;e<a.dependencies.length;e++){var r=t.getFieldValueObject(a.dependencies[e]);if(null===r.value||""===r.value)return r.element.trigger("blur"),alert(a.dependencies[e].message),s.$setValidity("deps",!1),a.setValidity(),!0}return s.$setValidity("deps",!0),!1},i(function(){angular.isDefined(a["default"])&&!angular.isDefined(a.selectedItem)&&a.setValue(a["default"])},0)}}},controller:["$scope","$timeout",function(e,t){e.setDefault=function(a){e["default"]=a,t(function(){e.oldValue=a[e.fields[r.getIndexByProperty(e.fields,"labelField",!0)].field]},0)},e.setValue=function(t){var a=e.fields,n=a[r.getIndexByProperty(a,"labelField",!0)].field,l=t[n];angular.isDefined(l)||(l=t[n.toUpperCase()]),e.searchStr=e.lastSearchTerm=l,e.internalControl.selectedItem=e.selectedItem=t,e.showDropdown=!1,e.results=[],e.setValidity(),e.change({event:t})},e.clear=function(){e.searchStr=e.lastSearchTerm="",e.selectedItem=null,e.showDropdown=!1,e.results=[],e.internalControl.selectedItem=null}}]}}]),angular.module("px-data-grid.filter",[]).filter("dataGridRefresh",[function(){return function(e){return e?"fa fa-refresh fa-spin":"fa fa-refresh"}}]);var module=angular.module("px-data-grid",["px-data-grid.service","px-data-grid.filter","px-array-util","px-date-util","px-mask-util","px-string-util","px-util"]);module.directive("pxDataGrid",["pxConfig","pxArrayUtil","pxUtil","$timeout","$sce","$rootScope",function(e,t,r,a,n,l){return{restrict:"E",replace:!0,transclude:!1,template:'<div class="px-data-grid"><table id="{{id}}_pxDataTable" ng-bind-html="dataTable" class="{{class}}" width="100%"></table></div>',scope:{id:"@id",debug:"=pxDebug",tfoot:"=pxFoot",config:"@pxConfig",lengthChange:"=pxLengthChange",lengthMenu:"=pxLengthMenu",ajaxUrl:"@pxAjaxUrl",schema:"@pxSchema",table:"@pxTable",fields:"@pxFields",orderBy:"@pxOrderBy",group:"@pxGroup",groupItem:"@pxGroupItem",groupLabel:"@pxGroupLabel",where:"@pxWhere",columns:"@pxColumns",check:"=pxCheck",edit:"=pxEdit",init:"&pxInit",configChange:"&pxConfigChange",itemClick:"&pxItemClick",itemEdit:"&pxItemEdit",dataInit:"=pxDataInit",rowsProcess:"@pxRowsProcess",demand:"@pxDemand",control:"=pxControl",labelFunction:"&pxLabelFunction"},link:function(i,o,s){o.on("$destroy",function(){u()}),"px-data-grid"===s["class"].trim()?i["class"]="table dataTable hovered":i["class"]="table dataTable hovered "+s["class"].replace("px-data-grid",""),angular.isDefined(i.id)&&""!==i.id||console.warn("pxDataGrid: Existe um px-data-grid sem id, isto pode causar sérios problemas em seu código!"),i.id=i.id||"pxTable",i.rowsProcess=parseInt(i.rowsProcess)||100,angular.isDefined(i.demand)?i.demand="true"===i.demand:i.demand=!0,angular.isDefined(i.group)?i.group="true"===i.group:i.group=e.GROUP,i.events=!1;var u=i.$watch("config",function(o,s){if(""!==o){if(o=JSON.parse(o),""!==s&&angular.isDefined(i.fields)){var u=$("#"+i.id+"_pxDataTable");u.DataTable().destroy(),i.reset()}if(i.url=o.url||"",i.fields=o.fields,i.dataTable="",i.dataTable+="<thead>",i.aoColumns=[],i.columns="",i.foot="",i.schema=o.schema||"dbo",i.table=o.table,i.view=o.view,i.orderBy=o.orderBy,i.where=o.where,i.group=i.group||e.GROUP,angular.isDefined(o.group)&&(i.group=o.group),angular.isDefined(o.groupItem)&&(i.groupItem=o.groupItem),angular.isDefined(o.groupLabel)&&(i.groupLabel=o.groupLabel),i.group===!0){if(""===e.GROUP_ITEM_SUFFIX)i.groupItem=i.groupItem||e.GROUP_ITEM;else if(!angular.isDefined(i.groupItem)){i.groupItem=i.groupItem||i.table+"_"+e.GROUP_ITEM_SUFFIX;for(var d=0;d<e.GROUP_REPLACE.length;d++)i.groupItem=i.groupItem.replace(e.GROUP_REPLACE[d],"")}if(""===e.GROUP_LABEL_SUFFIX)i.groupLabel=i.groupLabel||e.GROUP_LABEL;else if(!angular.isDefined(i.groupLabel)){i.groupLabel=i.groupLabel||e.GROUP_TABLE+"_"+e.GROUP_LABEL_SUFFIX;for(var d=0;d<e.GROUP_REPLACE.length;d++)i.groupLabel=i.groupLabel.replace(e.GROUP_REPLACE[d],"")}}i.group&&-1===t.getIndexByProperty(i.fields,"field",i.groupLabel)&&1===l.globals.currentUser.per_developer&&(""===e.GROUP_ITEM?i.fields.push({title:"Grupo",field:i.groupLabel,type:"string",filter:i.id,filterOperator:"=",filterOptions:{field:i.groupItem,selectedItem:e.GROUP_TABLE+"_"+e.GROUP_ITEM_SUFFIX},filterGroup:!0}):i.fields.push({title:"Grupo",field:i.groupLabel,type:"string",filter:i.id,filterOperator:"=",filterOptions:{field:i.groupItem,selectedItem:e.GROUP_ITEM},filterGroup:!0}));var d=0,c={},p=0;i.columnDefs=[],i.links=[],angular.forEach(i.fields,function(e){e.width=e.width||"","center"===e.align?e.align="text-center":"right"===e.align?e.align="text-right":e.align="text-left",0===d&&i.check===!0&&(i.columns+='<th class="text-left" width="1%"><input name="select_all" value="1" type="checkbox"></th>',i.foot+='<th width="1%"></th>',c={},c.mData="pxDataGridRowNumber",i.aoColumns.push(c),i.columnDefs.push({targets:p,searchable:!1,orderable:!1,className:"dt-body-center",render:function(e,t,r,a){return"<input type='checkbox'>"}}),p++),d++,1===d&&i.edit===!0&&(i.columns+='<th class="text-center" width="1%"><i class=""></i></th>',i.foot+='<th width="1%"></th>',c={},c.mData="edit",i.aoColumns.push(c),i.columnDefs.push({targets:p,searchable:!1,orderable:!1,className:"dt-body-center edit",render:function(e,t,r,a){return"<i class='fa fa-pencil'>"}}),p++),e.link||e["class"]?(e.width="1%",i.links.push(e),i.columnDefs.push({mData:e.linkId,targets:p,searchable:!0,orderable:!1,className:"dt-body-center",render:function(t,r,a,n){return"undefined"==typeof e.icon&&(e.icon=""),e.link?"<div class='link "+e.align+"'><i link='true' linkId="+e.linkId+" class='"+e["class"]+"'>"+e.icon+"</i></div>":"<div class='"+e.align+"'><i class='"+e["class"]+"'>"+e.icon+"</i></div>"}})):e.label&&i.columnDefs.push({mData:e.linkId,targets:p,searchable:!0,orderable:!1,className:"dt-body-center",render:function(t,r,a,n){return"<div class='"+e.align+"'>"+t+"</div>"}}),e.visible===!1&&i.columnDefs.push({targets:p,visible:!1,render:function(e,t,r,a){return e}}),p++,i.columns+='<th class="text-left">'+e.title+"</th>",i.foot+='<th class="text-left"></th>',c={},c.mData=e.field,i.aoColumns.push(c),d++}),i.dataTable+=i.columns,i.dataTable+="</thead>",i.dataTable+="<tbody></tbody>",i.dataTable+='<tfoot class="tfoot">',i.dataTable+=i.foot,i.dataTable+="</tfoot>",i.dataTable=n.trustAsHtml(i.dataTable),a(function(){i.rowsSelected=[];var e="";e+="l",e+="t",e+="i",e+="p",e+="r";var t={};i.ajaxUrl&&(t.ajax={url:i.ajaxUrl,dataSrc:""}),t.language={processing:"Processando...",search:"Filtrar registros carregados",lengthMenu:"Visualizar _MENU_ registros",info:"_TOTAL_ registros carregados.",infoEmpty:"Nenhum registro encontrado",zeroRecords:"Nenhum registro encontrado",emptyTable:"Nenhum registro encontrado.",infoFiltered:"",paginate:{first:"Primeira",previous:"« Anterior",next:"Próxima »",last:"Última"}},r.isMobile()&&(t.pagingType="simple",t.pageLength=8),t.bFilter=!0,t.bLengthChange=i.lengthChange,t.lengthMenu=i.lengthMenu,t.sDom=e,t.bProcessing=!0,t.aoColumns=i.aoColumns,t.destroy=!0,t.columnDefs=i.columnDefs,t.order=[],t.rowCallback=function(e,t,r){var a=t.pxDataGridRowNumber;-1!==$.inArray(a,i.rowsSelected)&&($(e).find('input[type="checkbox"]').prop("checked",!0),$(e).addClass("selected"))},$("#"+i.id+"_pxDataTable").dataTable(t),i.dataInit===!0&&i.getData(0,i.rowsProcess);$("#"+i.id+"_pxDataTable").DataTable();i.internalControl.table=$("#"+i.id+"_pxDataTable").DataTable(),i.events||(i.eventInit(),i.events=!0),i.creationcomplete?i.configChange({event:{config:JSON.parse(i.config)}}):(i.creationcomplete=!0,i.init({event:{config:JSON.parse(i.config)}}))},0)}});i.internalControl=i.control||{},i.internalControl.working=!1,i.internalControl.getData=function(){a(function(){i.getData(0,i.rowsProcess)},0)},i.internalControl.sortDataBy=function(e){i.sortDataBy(e)},i.internalControl.addDataRow=function(e){i.addDataRow(e)},i.internalControl.updateDataRow=function(e){i.updateDataRow(e)},i.internalControl.removeRow=function(e,t){angular.isDefined(t)||(t=!0),i.removeRow(e,t)},i.internalControl.clearData=function(){i.clearData()},i.internalControl.remove=function(){i.remove()},i.internalControl.selectedItems=[],i.currentRecordCount=0},controller:pxDataGridCtrl}}]),pxDataGridCtrl.$inject=["pxConfig","pxUtil","pxArrayUtil","pxDateUtil","pxMaskUtil","pxStringUtil","pxDataGridService","$scope","$http","$timeout"],angular.module("px-data-grid.service",[]).factory("pxDataGridService",pxDataGridService),pxDataGridService.$inject=["pxConfig","$http","$rootScope"];